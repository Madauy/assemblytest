DATA:
  arr 7
      12
      4
      0
  len 4
  idx 0
  idx_end 3
  min_idx 0
  max_idx 0
  temp 0
  one 1

CODE:
  MOV A, arr
  CALL min_max_sort
  JMP end

min_max_sort:
  PUSH A
  MOV B, len
  MOV A, (B)
  JLE done
  MOV A, idx
  CALL find_min_max
  CALL swap_min_max
  INC (idx)
  MOV A, idx_end
  SUB A, (one)
  MOV (idx_end), A
  MOV A, (B)
  SUB A, (one)
  MOV (B), A
  JMP min_max_sort

done:
  POP A
  RET

find_min_max:
  MOV A, idx
  MOV min_idx, A
  MOV A, idx_end
  MOV max_idx, A
  MOV A, idx
  ADD A, (one)
  MOV B, A

find_loop:
  CPM A, (idx_end)
  JGT find_done
  MOV A, (B)
  CPM A, (min_idx)
  JLT update_min
  JMP skip_min

update_min:
  MOV (min_idx), B

skip_min:
  MOV A, (B)
  CPM A, (max_idx)
  JGT update_max
  JMP skip_max

update_max:
  MOV (max_idx), B

skip_max:
  ADD A, (one)
  ADD B, (one)
  JMP find_loop

find_done:
  RET

swap_min_max:
  MOV A, (min_idx)
  MOV (temp), A
  MOV A, (max_idx)
  MOV (min_idx), A
  MOV A, temp
  MOV (max_idx), A
  RET

end:
