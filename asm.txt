DATA:
  arr 7
      12
      4
      0
  len 4

CODE:
  MOV B, len
  SHR B
  MOV A, arr
  MOV (Dir), A
  CALL min_max_sort
  JMP end

min_max_sort:
  PUSH B
  MOV B, (Dir)
  ADD B, A
  JLE done
  MOV B, A
  CALL find_min_max
  MOV A, (B)
  MOV (Dir), A
  CALL swap_min_max
  INC A
  INC Dir
  DEC len
  DEC len
  JMP min_max_sort

done:
  POP B
  RET

find_min_max:
  PUSH A
  PUSH B
  MOV A, (B)
  INC B
  MOV (B), A
  INC B
  MOV A, (B)
  INC B
  MOV (B), A
  INC B
  JMP min_max_search_loop

min_max_search_loop:
  CPM A, (Dir)
  JGE min_max_search_next
  MOV A, (Dir)
  MOV B, (B)
  JMP min_max_search_loop

min_max_search_next:
  DEC B
  CPM B, A
  JNE min_max_search_loop
  POP B
  POP A
  RET

swap_min_max:
  PUSH A
  PUSH B
  MOV A, (Dir)
  MOV B, (B)
  MOV (Dir), B
  MOV (B), A
  POP B
  POP A
  RET

end:
